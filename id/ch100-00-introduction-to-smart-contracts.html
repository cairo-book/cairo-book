<!DOCTYPE HTML>
<html lang="id" class="sidebar-visible no-js light">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Introduction to Smart Contracts - The Cairo Programming Language</title>


    <!-- Custom HTML head -->

    <meta name="description" content="The Cairo Programming Language. A comprehensive documentation for Cairo, the smart contract language for Starknet.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
    <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->
    <link rel="stylesheet" href="theme/css/last-changed.css">
    <link rel="stylesheet" href="theme/css/chat.css">
    <link rel="stylesheet" href="theme/css/version-switcher.css">

    <!-- MathJax -->
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


    <link rel="canonical" id="canonical-link" href="" />
    <script>
        (function () {
            var path = "ch100-00-introduction-to-smart-contracts.md";
            var canonicalPath;

            // Special handling for different cases
            if (path === "" || path === "index.md") {
                // Homepage should not have index.html
                canonicalPath = "";
            } else {
                // Other pages: replace .md with .html
                canonicalPath = path.replace(/\.md$/, ".html");
            }

            var canonicalUrl = "https://www.starknet.io/cairo-book/" + canonicalPath;

            // Remove trailing slash if present (except for root)
            if (canonicalUrl.endsWith("/") && canonicalUrl !== "https://www.starknet.io/cairo-book/") {
                canonicalUrl = canonicalUrl.slice(0, -1);
            }

            document.getElementById("canonical-link").href = canonicalUrl;
        })();
    </script>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-M6M97KJP');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M6M97KJP" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-0ZJLBV4KE2"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'G-0ZJLBV4KE2'); // lfg
            gtag('config', 'G-WY42TERK5P') // starknet
            gtag('config', 'G-1CHRL0BVJC'); // pers
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">The Cairo Book</a></li><li class="chapter-item expanded affix "><a href="ch00-01-foreword.html">Foreword</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">The Cairo Programming Language</li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello, World!</a></li><li class="chapter-item expanded "><a href="ch01-03-proving-a-prime-number.html"><strong aria-hidden="true">1.3.</strong> Proving That A Number Is Prime</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-common-programming-concepts.html"><strong aria-hidden="true">2.</strong> Common Programming Concepts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-variables-and-mutability.html"><strong aria-hidden="true">2.1.</strong> Variables and Mutability</a></li><li class="chapter-item expanded "><a href="ch02-02-data-types.html"><strong aria-hidden="true">2.2.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="ch02-03-functions.html"><strong aria-hidden="true">2.3.</strong> Functions</a></li><li class="chapter-item expanded "><a href="ch02-04-comments.html"><strong aria-hidden="true">2.4.</strong> Comments</a></li><li class="chapter-item expanded "><a href="ch02-05-control-flow.html"><strong aria-hidden="true">2.5.</strong> Control Flow</a></li></ol></li><li class="chapter-item expanded "><a href="ch03-00-common-collections.html"><strong aria-hidden="true">3.</strong> Common Collections</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-arrays.html"><strong aria-hidden="true">3.1.</strong> Arrays</a></li><li class="chapter-item expanded "><a href="ch03-02-dictionaries.html"><strong aria-hidden="true">3.2.</strong> Dictionaries</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-understanding-ownership.html"><strong aria-hidden="true">4.</strong> Understanding Ownership</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-what-is-ownership.html"><strong aria-hidden="true">4.1.</strong> What is Ownership?</a></li><li class="chapter-item expanded "><a href="ch04-02-references-and-snapshots.html"><strong aria-hidden="true">4.2.</strong> References and Snapshots</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-using-structs-to-structure-related-data.html"><strong aria-hidden="true">5.</strong> Using Structs to Structure Related Data</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-defining-and-instantiating-structs.html"><strong aria-hidden="true">5.1.</strong> Defining and Instantiating Structs</a></li><li class="chapter-item expanded "><a href="ch05-02-an-example-program-using-structs.html"><strong aria-hidden="true">5.2.</strong> An Example Program Using Structs</a></li><li class="chapter-item expanded "><a href="ch05-03-method-syntax.html"><strong aria-hidden="true">5.3.</strong> Method Syntax</a></li></ol></li><li class="chapter-item expanded "><a href="ch06-00-enums-and-pattern-matching.html"><strong aria-hidden="true">6.</strong> Enums and Pattern Matching</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch06-01-enums.html"><strong aria-hidden="true">6.1.</strong> Enums</a></li><li class="chapter-item expanded "><a href="ch06-02-the-match-control-flow-construct.html"><strong aria-hidden="true">6.2.</strong> The Match Control Flow Construct</a></li><li class="chapter-item expanded "><a href="ch06-03-concise-control-flow-with-if-let-and-while-let.html"><strong aria-hidden="true">6.3.</strong> Concise Control Flow with if let and while let</a></li></ol></li><li class="chapter-item expanded "><a href="ch07-00-managing-cairo-projects-with-packages-crates-and-modules.html"><strong aria-hidden="true">7.</strong> Managing Cairo Projects with Packages, Crates and Modules</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch07-01-packages-and-crates.html"><strong aria-hidden="true">7.1.</strong> Packages and Crates</a></li><li class="chapter-item expanded "><a href="ch07-02-defining-modules-to-control-scope.html"><strong aria-hidden="true">7.2.</strong> Defining Modules to Control Scope</a></li><li class="chapter-item expanded "><a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html"><strong aria-hidden="true">7.3.</strong> Paths for Referring to an Item in the Module Tree</a></li><li class="chapter-item expanded "><a href="ch07-04-bringing-paths-into-scope-with-the-use-keyword.html"><strong aria-hidden="true">7.4.</strong> Bringing Paths into Scope with the use Keyword</a></li><li class="chapter-item expanded "><a href="ch07-05-separating-modules-into-different-files.html"><strong aria-hidden="true">7.5.</strong> Separating Modules into Different Files</a></li></ol></li><li class="chapter-item expanded "><a href="ch08-00-generic-types-and-traits.html"><strong aria-hidden="true">8.</strong> Generic Types and Traits</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch08-01-generic-data-types.html"><strong aria-hidden="true">8.1.</strong> Generic Data Types</a></li><li class="chapter-item expanded "><a href="ch08-02-traits-in-cairo.html"><strong aria-hidden="true">8.2.</strong> Traits in Cairo</a></li></ol></li><li class="chapter-item expanded "><a href="ch09-00-error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch09-01-unrecoverable-errors-with-panic.html"><strong aria-hidden="true">9.1.</strong> Unrecoverable Errors with panic</a></li><li class="chapter-item expanded "><a href="ch09-02-recoverable-errors.html"><strong aria-hidden="true">9.2.</strong> Recoverable Errors with Result</a></li></ol></li><li class="chapter-item expanded "><a href="ch10-00-testing-cairo-programs.html"><strong aria-hidden="true">10.</strong> Testing Cairo Programs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch10-01-how-to-write-tests.html"><strong aria-hidden="true">10.1.</strong> How To Write Tests</a></li><li class="chapter-item expanded "><a href="ch10-02-test-organization.html"><strong aria-hidden="true">10.2.</strong> Test Organization</a></li></ol></li><li class="chapter-item expanded "><a href="ch11-00-functional-features.html"><strong aria-hidden="true">11.</strong> Functional Language Features: Iterators and Closures</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch11-01-closures.html"><strong aria-hidden="true">11.1.</strong> Closures: Anonymous Functions that Capture Their Environment</a></li></ol></li><li class="chapter-item expanded "><a href="ch12-00-advanced-features.html"><strong aria-hidden="true">12.</strong> Advanced Cairo Features</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch12-01-custom-data-structures.html"><strong aria-hidden="true">12.1.</strong> Custom Data Structures</a></li><li class="chapter-item expanded "><a href="ch12-02-smart-pointers.html"><strong aria-hidden="true">12.2.</strong> Smart Pointers</a></li><li class="chapter-item expanded "><a href="ch12-09-deref-coercion.html"><strong aria-hidden="true">12.3.</strong> Deref Coercion</a></li><li class="chapter-item expanded "><a href="ch12-10-associated-items.html"><strong aria-hidden="true">12.4.</strong> Associated Items</a></li><li class="chapter-item expanded "><a href="ch12-03-operator-overloading.html"><strong aria-hidden="true">12.5.</strong> Operator Overloading</a></li><li class="chapter-item expanded "><a href="ch12-04-hash.html"><strong aria-hidden="true">12.6.</strong> Working with Hashes</a></li><li class="chapter-item expanded "><a href="ch12-05-macros.html"><strong aria-hidden="true">12.7.</strong> Macros</a></li><li class="chapter-item expanded "><a href="ch12-10-procedural-macros.html"><strong aria-hidden="true">12.8.</strong> Procedural Macros</a></li><li class="chapter-item expanded "><a href="ch12-06-inlining-in-cairo.html"><strong aria-hidden="true">12.9.</strong> Inlining in Cairo</a></li><li class="chapter-item expanded "><a href="ch12-08-printing.html"><strong aria-hidden="true">12.10.</strong> Printing</a></li><li class="chapter-item expanded "><a href="ch12-10-arithmetic-circuits.html"><strong aria-hidden="true">12.11.</strong> Arithmetic Circuits</a></li><li class="chapter-item expanded "><a href="ch12-11-offloading-computations-with-oracles.html"><strong aria-hidden="true">12.12.</strong> Offloading Computations with Oracles</a></li></ol></li><li class="chapter-item expanded "><a href="appendix-00.html"><strong aria-hidden="true">13.</strong> Appendix (Cairo)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix-01-keywords.html"><strong aria-hidden="true">13.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="appendix-02-operators-and-symbols.html"><strong aria-hidden="true">13.2.</strong> B - Operators and Symbols</a></li><li class="chapter-item expanded "><a href="appendix-03-derivable-traits.html"><strong aria-hidden="true">13.3.</strong> C - Derivable Traits</a></li><li class="chapter-item expanded "><a href="appendix-04-cairo-prelude.html"><strong aria-hidden="true">13.4.</strong> D - The Cairo Prelude</a></li><li class="chapter-item expanded "><a href="appendix-05-common-error-messages.html"><strong aria-hidden="true">13.5.</strong> E - Common Error Messages</a></li><li class="chapter-item expanded "><a href="appendix-06-useful-development-tools.html"><strong aria-hidden="true">13.6.</strong> F - Useful Development Tools</a></li></ol></li><li class="chapter-item expanded "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Smart Contracts in Cairo</li><li class="chapter-item expanded "><a href="ch100-00-introduction-to-smart-contracts.html"><strong aria-hidden="true">14.</strong> Introduction to Smart Contracts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch100-01-contracts-classes-and-instances.html"><strong aria-hidden="true">14.1.</strong> Starknet contract classes and instances</a></li></ol></li><li class="chapter-item expanded "><a href="ch101-00-building-starknet-smart-contracts.html"><strong aria-hidden="true">15.</strong> Building Starknet Smart Contracts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch101-01-starknet-types.html"><strong aria-hidden="true">15.1.</strong> Starknet Types</a></li><li class="chapter-item expanded "><a href="ch101-01-00-contract-storage.html"><strong aria-hidden="true">15.2.</strong> Contract Storage</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ch101-01-01-storage-mappings.html"><strong aria-hidden="true">15.2.1.</strong> Storage Mappings</a></li><li class="chapter-item "><a href="ch101-01-02-storage-vecs.html"><strong aria-hidden="true">15.2.2.</strong> Storage Vecs</a></li></ol></li><li class="chapter-item expanded "><a href="ch101-02-contract-functions.html"><strong aria-hidden="true">15.3.</strong> Contract Functions</a></li><li class="chapter-item expanded "><a href="ch101-03-contract-events.html"><strong aria-hidden="true">15.4.</strong> Contract Events</a></li></ol></li><li class="chapter-item expanded "><a href="ch102-00-starknet-contract-interactions.html"><strong aria-hidden="true">16.</strong> Starknet Contract Interactions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch102-01-contract-class-abi.html"><strong aria-hidden="true">16.1.</strong> Contract Class ABI</a></li><li class="chapter-item expanded "><a href="ch102-02-interacting-with-another-contract.html"><strong aria-hidden="true">16.2.</strong> Interacting with Another Contract</a></li><li class="chapter-item expanded "><a href="ch102-03-executing-code-from-another-class.html"><strong aria-hidden="true">16.3.</strong> Executing Code from Another Class</a></li><li class="chapter-item expanded "><a href="ch102-04-serialization-of-cairo-types.html"><strong aria-hidden="true">16.4.</strong> Serialization of Cairo types</a></li></ol></li><li class="chapter-item expanded "><a href="ch103-00-building-advanced-starknet-smart-contracts.html"><strong aria-hidden="true">17.</strong> Building Advanced Starknet Smart Contracts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch103-01-optimizing-storage-costs.html"><strong aria-hidden="true">17.1.</strong> Optimizing Storage Costs</a></li><li class="chapter-item expanded "><a href="ch103-02-00-composability-and-components.html"><strong aria-hidden="true">17.2.</strong> Composability and Components</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ch103-02-01-under-the-hood.html"><strong aria-hidden="true">17.2.1.</strong> Under the Hood</a></li><li class="chapter-item "><a href="ch103-02-02-component-dependencies.html"><strong aria-hidden="true">17.2.2.</strong> Component Dependencies</a></li><li class="chapter-item "><a href="ch103-02-03-testing-components.html"><strong aria-hidden="true">17.2.3.</strong> Testing Components</a></li></ol></li><li class="chapter-item expanded "><a href="ch103-03-upgradeability.html"><strong aria-hidden="true">17.3.</strong> Upgradeability</a></li><li class="chapter-item expanded "><a href="ch103-04-L1-L2-messaging.html"><strong aria-hidden="true">17.4.</strong> L1 &lt;&gt; L2 Messaging</a></li><li class="chapter-item expanded "><a href="ch103-05-oracle-interactions.html"><strong aria-hidden="true">17.5.</strong> Oracle Interactions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ch103-05-01-price-feeds.html"><strong aria-hidden="true">17.5.1.</strong> Price Feeds</a></li><li class="chapter-item "><a href="ch103-05-02-randomness.html"><strong aria-hidden="true">17.5.2.</strong> Randomness</a></li></ol></li><li class="chapter-item expanded "><a href="ch103-06-00-other-examples.html"><strong aria-hidden="true">17.6.</strong> Other Examples</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ch103-06-01-deploying-and-interacting-with-a-voting-contract.html"><strong aria-hidden="true">17.6.1.</strong> Deploying and Interacting with a Voting Contract</a></li><li class="chapter-item "><a href="ch103-06-02-working-with-erc20-token.html"><strong aria-hidden="true">17.6.2.</strong> Working with ERC20 Token</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="ch104-00-starknet-smart-contracts-security.html"><strong aria-hidden="true">18.</strong> Starknet Smart Contracts Security</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch104-01-general-recommendations.html"><strong aria-hidden="true">18.1.</strong> General Recommendations</a></li><li class="chapter-item expanded "><a href="ch104-02-testing-smart-contracts.html"><strong aria-hidden="true">18.2.</strong> Testing Smart Contracts</a></li><li class="chapter-item expanded "><a href="ch104-03-static-analysis-tools.html"><strong aria-hidden="true">18.3.</strong> Static Analysis Tools</a></li></ol></li><li class="chapter-item expanded "><a href="appendix-000.html"><strong aria-hidden="true">19.</strong> Appendix (Starknet)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix-08-system-calls.html"><strong aria-hidden="true">19.1.</strong> A - System Calls</a></li><li class="chapter-item expanded "><a href="appendix-09-sierra.html"><strong aria-hidden="true">19.2.</strong> B - Sierra</a></li></ol></li><li class="chapter-item expanded "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Cairo VM</li><li class="chapter-item expanded "><a href="ch200-introduction.html"><strong aria-hidden="true">20.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="ch201-architecture.html"><strong aria-hidden="true">21.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="ch202-00-memory.html"><strong aria-hidden="true">22.</strong> Memory</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch202-01-non-deterministic-read-only-memory.html"><strong aria-hidden="true">22.1.</strong> Non-Deterministic Read-only Memory</a></li><li class="chapter-item expanded "><a href="ch202-02-segments.html"><strong aria-hidden="true">22.2.</strong> Segments and Relocation</a></li></ol></li><li class="chapter-item expanded "><a href="ch203-00-execution-model.html"><strong aria-hidden="true">23.</strong> Execution Model</a></li><li class="chapter-item expanded "><a href="ch204-00-builtins.html"><strong aria-hidden="true">24.</strong> Builtins</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch204-01-how-builtins-work.html"><strong aria-hidden="true">24.1.</strong> How Builtins Work</a></li><li class="chapter-item expanded "><a href="ch204-02-builtins-list.html"><strong aria-hidden="true">24.2.</strong> Builtins List</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ch204-02-00-output.html"><strong aria-hidden="true">24.2.1.</strong> Output</a></li><li class="chapter-item "><a href="ch204-02-01-pedersen.html"><strong aria-hidden="true">24.2.2.</strong> Pedersen</a></li><li class="chapter-item "><a href="ch204-02-02-range-check.html"><strong aria-hidden="true">24.2.3.</strong> Range Check</a></li><li class="chapter-item "><a href="ch204-02-03-ecdsa.html"><strong aria-hidden="true">24.2.4.</strong> ECDSA</a></li><li class="chapter-item "><a href="ch204-02-04-bitwise.html"><strong aria-hidden="true">24.2.5.</strong> Bitwise</a></li><li class="chapter-item "><a href="ch204-02-05-ec-op.html"><strong aria-hidden="true">24.2.6.</strong> EC OP</a></li><li class="chapter-item "><a href="ch204-02-06-keccak.html"><strong aria-hidden="true">24.2.7.</strong> Keccak</a></li><li class="chapter-item "><a href="ch204-02-07-poseidon.html"><strong aria-hidden="true">24.2.8.</strong> Poseidon</a></li><li class="chapter-item "><a href="ch204-02-08-mod-builtin.html"><strong aria-hidden="true">24.2.9.</strong> Mod Builtin</a></li><li class="chapter-item "><a href="ch204-02-11-segment-arena.html"><strong aria-hidden="true">24.2.10.</strong> Segment Arena</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="ch205-00-hints.html"><strong aria-hidden="true">25.</strong> Hints</a></li><li class="chapter-item expanded "><a href="ch206-00-runner.html"><strong aria-hidden="true">26.</strong> Runner</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">26.1.</strong> Program</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">26.1.1.</strong> Program Artifacts</div></li><li class="chapter-item "><div><strong aria-hidden="true">26.1.2.</strong> Program Parsing</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">26.2.</strong> Runner Mode</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">26.2.1.</strong> Execution Mode</div></li><li class="chapter-item "><div><strong aria-hidden="true">26.2.2.</strong> Proof Mode</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">26.3.</strong> Output</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">26.3.1.</strong> Cairo PIE</div></li><li class="chapter-item "><div><strong aria-hidden="true">26.3.2.</strong> Memory File</div></li><li class="chapter-item "><div><strong aria-hidden="true">26.3.3.</strong> Trace file</div></li><li class="chapter-item "><div><strong aria-hidden="true">26.3.4.</strong> AIR public input</div></li><li class="chapter-item "><div><strong aria-hidden="true">26.3.5.</strong> AIR private input</div></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">27.</strong> Tracer</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">28.</strong> Implementations</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">29.</strong> Resources</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                            aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                            aria-label="Change theme" aria-haspopup="true" aria-expanded="false"
                            aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                            aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Cairo Programming Language</h1>


                    <div class="right-buttons">
                        <div class="menu-cairo-home-wrapper">
                            <a href="https://cairo-lang.org" class="menu-cairo-home" title="Cairo Home"
                                aria-label="Cairo Home">
                                <img src="/icons/Cairo_logo_500x500.png" alt="Cairo Logo"
                                    class="cairo-logo">
                                <span class="menu-cairo-home-text">Cairo Home</span>
                            </a>
                        </div>
                        <div class="menu-cairo-home-wrapper">
                            <a href="https://starknet.io" class="menu-cairo-home" title="Starknet" aria-label="Starknet">
                                <img src="/icons/SN_logo.png" alt="Starknet Logo"
                                    class="cairo-logo">
                                <span class="menu-cairo-home-text">Starknet</span>
                            </a>
                        </div>
                        <button id="language-toggle" class="icon-button" type="button" title="Change language"
                            aria-label="Change language" aria-haspopup="true" aria-expanded="false"
                            aria-controls="language-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="language-list" class="theme-popup" aria-label="Languages" role="menu">
                            <li role="none"><button role="menuitem" class="theme">
                                    <a id="en">English</a>
                                </button></li>
                        </ul>
                        <script>
                            let langToggle = document.getElementById("language-toggle");
                            let langList = document.getElementById("language-list");
                            langToggle.addEventListener("click", (event) => {
                                langList.style.display = langList.style.display == "block" ? "none" : "block";
                            });
                            let selectedLang = document.getElementById("id");
                            selectedLang.parentNode.classList.add("theme-selected");

                            // The path to the root, taking the current
                            // language into account.
                            { { #if(eq language "en") } }
                            let full_path_to_root = "";
                            { {else } }
                            let full_path_to_root = "../";
                            { {/if } }
                            // The page path (mdbook only gives us
                            // access to the path to the Markdown file).
                            let path = "ch100-00-introduction-to-smart-contracts.md".replace(/\.md$/, ".html");
                            for (let lang of langList.querySelectorAll("a")) {
                                if (lang.id == "en") {
                                    lang.href = `${full_path_to_root}${path}`;
                                } else {
                                    lang.href = `${full_path_to_root}${lang.id}/${path}`;
                                }
                            }
                        </script>

                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cairo-book/cairo-book.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/cairo-book/cairo-book.github.io/edit/main/src/ch100-00-introduction-to-smart-contracts.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..."
                            aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2>meta:
"Explore the fundamentals of smart contracts in this comprehensive
introduction, tailored for developers using Cairo. Learn how smart contracts
work and their role in blockchain technology."</h2>
<h1 id="introduction-to-smart-contracts"><a class="header" href="#introduction-to-smart-contracts">Introduction to Smart Contracts</a></h1>
<p>This chapter will give you a high level introduction to what smart contracts
are, what they are used for, and why blockchain developers would use Cairo and
Starknet. If you are already familiar with blockchain programming, feel free to
skip this chapter. The last part might still be interesting though.</p>
<h2 id="smart-contracts---introduction"><a class="header" href="#smart-contracts---introduction">Smart Contracts - Introduction</a></h2>
<p>Smart contracts gained popularity and became more widespread with the birth of
Ethereum. Smart contracts are essentially programs deployed on a blockchain. The
term "smart contract" is somewhat misleading, as they are neither "smart" nor
"contracts" but rather code and instructions that are executed based on specific
inputs. They primarily consist of two components: storage and functions. Once
deployed, users can interact with smart contracts by initiating blockchain
transactions containing execution data (which function to call and with what
input). Smart contracts can modify and read the storage of the underlying
blockchain. A smart contract has its own address and is considered a blockchain
account, meaning it can hold tokens.</p>
<p>The programming language used to write smart contracts varies depending on the
blockchain. For example, on Ethereum and the <a href="https://ethereum.org/en/developers/docs/evm/">EVM-compatible ecosystem</a>,
the most commonly used language is Solidity, while on Starknet, it is Cairo. The
way the code is compiled also differs based on the blockchain. On Ethereum,
Solidity is compiled into bytecode. On Starknet, Cairo is compiled into Sierra
and then into Cairo Assembly (CASM).</p>
<p>Smart contracts possess several unique characteristics. They are
<strong>permissionless</strong>, meaning anyone can deploy a smart contract on the network
(within the context of a decentralized blockchain, of course). Smart contracts
are also <strong>transparent</strong>; the data stored by the smart contract is accessible to
anyone. The code that composes the contract can also be transparent, enabling
<strong>composability</strong>. This allows developers to write smart contracts that use
other smart contracts. Smart contracts can only access and interact with data
from the blockchain they are deployed on. They require third-party software
(called <em>oracles</em>) to access external data (the price of a token for instance).</p>
<p>For developers to build smart contracts that can interact with each other, it is
required to know what the other contracts look like. Hence, Ethereum developers
started to build standards for smart contract development, the <code>ERCxx</code>. The two
most used and famous standards are the <code>ERC20</code>, used to build tokens like
<code>USDC</code>, <code>DAI</code> or <code>STARK</code>, and the <code>ERC721</code>, for NFTs (Non-Fungible Tokens) like
<code>CryptoPunks</code> or <code>Everai</code>.</p>
<h2 id="smart-contracts---use-cases"><a class="header" href="#smart-contracts---use-cases">Smart Contracts - Use Cases</a></h2>
<p>There are many possible use cases for smart contracts. The only limits are the
technical constraints of the blockchain and the creativity of developers.</p>
<h3 id="defi"><a class="header" href="#defi">DeFi</a></h3>
<p>For now, the principal use case for smart contracts is similar to that of
Ethereum or Bitcoin, which is essentially handling money. In the context of the
alternative payment system promised by Bitcoin, smart contracts on Ethereum
enable the creation of decentralized financial applications that no longer rely
on traditional financial intermediaries. This is what we call DeFi
(decentralized finance). DeFi consists of various projects such as
lending/borrowing applications, decentralized exchanges (DEX), on-chain
derivatives, stablecoins, decentralized hedge funds, insurance, and many more.</p>
<h3 id="tokenization"><a class="header" href="#tokenization">Tokenization</a></h3>
<p>Smart contracts can facilitate the tokenization of real-world assets, such as
real estate, art, or precious metals. Tokenization divides an asset into digital
tokens, which can be easily traded and managed on blockchain platforms. This can
increase liquidity, enable fractional ownership, and simplify the buying and
selling process.</p>
<h3 id="voting"><a class="header" href="#voting">Voting</a></h3>
<p>Smart contracts can be used to create secure and transparent voting systems.
Votes can be recorded on the blockchain, ensuring immutability and transparency.
The smart contract can then automatically tally the votes and declare the
results, minimizing the potential for fraud or manipulation.</p>
<h3 id="royalties"><a class="header" href="#royalties">Royalties</a></h3>
<p>Smart contracts can automate royalty payments for artists, musicians, and other
content creators. When a piece of content is consumed or sold, the smart
contract can automatically calculate and distribute the royalties to the
rightful owners, ensuring fair compensation and reducing the need for
intermediaries.</p>
<h3 id="decentralized-identities-dids"><a class="header" href="#decentralized-identities-dids">Decentralized Identities DIDs</a></h3>
<p>Smart contracts can be used to create and manage digital identities, allowing
individuals to control their personal information and share it with third
parties securely. The smart contract could verify the authenticity of a user's
identity and automatically grant or revoke access to specific services based on
the user's credentials.</p>
<br/>
<br/>
As Ethereum continues to mature, we can expect the use cases and applications of smart contracts to expand further, bringing about exciting new opportunities and reshaping traditional systems for the better.
<h2 id="the-rise-of-starknet-and-cairo"><a class="header" href="#the-rise-of-starknet-and-cairo">The Rise of Starknet and Cairo</a></h2>
<p>Ethereum, being the most widely used and resilient smart contract platform,
became a victim of its own success. With the rapid adoption of some previously
mentioned use cases, mainly DeFi, the cost of performing transactions became
extremely high, rendering the network almost unusable. Engineers and researchers
in the ecosystem began working on solutions to address this scalability issue.</p>
<p>A famous trilemma called The Blockchain Trilemma in the blockchain space states
that it is hard to achieve a high level of scalability, decentralization, and
security simultaneously; trade-offs must be made. Ethereum is at the
intersection of decentralization and security. Eventually, it was decided that
Ethereum's purpose would be to serve as a secure settlement layer, while complex
computations would be offloaded to other networks built on top of Ethereum.
These are called Layer 2s (L2s).</p>
<p>The two primary types of L2s are optimistic rollups and validity rollups. Both
approaches involve compressing and batching numerous transactions together,
computing the new state, and settling the result on Ethereum (L1). The
difference lies in the way the result is settled on L1. For optimistic rollups,
the new state is considered valid by default, but there is a 7-day window for
nodes to identify malicious transactions.</p>
<p>In contrast, validity rollups, such as Starknet, use cryptography to prove that
the new state has been correctly computed. This is the purpose of STARKs, this
cryptographic technology could permit validity rollups to scale significantly
more than optimistic rollups. You can learn more about STARKs from Starkware's
Medium <a href="https://medium.com/starkware/starks-starkex-and-starknet-9a426680745a">article</a>, which serves as a good primer.</p>
<blockquote>
<p>Starknet's architecture is thoroughly described in the
<a href="https://docs.starknet.io/documentation/architecture_and_concepts/">Starknet documentation</a>,
which is a great resource to learn more about the Starknet network.</p>
</blockquote>
<p>Remember Cairo? It is, in fact, a language developed specifically to work with
STARKs and make them general-purpose. With Cairo, we can write <strong>provable
code</strong>. In the context of Starknet, this allows proving the correctness of
computations from one state to another.</p>
<p>Unlike most (if not all) of Starknet's competitors that chose to use the EVM
(either as-is or adapted) as a base layer, Starknet employs its own VM. This
frees developers from the constraints of the EVM, opening up a broader range of
possibilities. Coupled with decreased transaction costs, the combination of
Starknet and Cairo creates an exciting playground for developers. Native account
abstraction enables more complex logic for accounts, that we call "Smart
Accounts", and transaction flows. Emerging use cases include <strong>transparent AI</strong>
and machine learning applications. Finally, <strong>blockchain games</strong> can be
developed entirely <strong>on-chain</strong>. Starknet has been specifically designed to
maximize the capabilities of STARK proofs for optimal scalability.</p>
<blockquote>
<p>Learn more about Account Abstraction in the
<a href="https://docs.starknet.io/documentation/architecture_and_concepts/Account_Abstraction/introduction/">Starknet documentation</a>.</p>
</blockquote>
<h2 id="cairo-programs-and-starknet-smart-contracts-what-is-the-difference"><a class="header" href="#cairo-programs-and-starknet-smart-contracts-what-is-the-difference">Cairo Programs and Starknet Smart Contracts: What Is the Difference?</a></h2>
<p>Starknet contracts are a special superset of Cairo programs, so the concepts
previously learned in this book are still applicable to write Starknet
contracts. As you may have already noticed, a Cairo program must always have a
<code>main</code> function that serves as the entry point for this program:</p>
<pre><code class="language-cairo">fn main() {}
</code></pre>
<p>Contracts deployed on the Starknet network are essentially programs that are run
by the sequencer, and as such, have access to Starknet's state. Contracts do not
have a <code>main</code> function but one or multiple functions that can serve as entry
points.</p>
<p>Starknet contracts are defined within <a href="./ch07-02-defining-modules-to-control-scope.html">modules</a>. For a module to
be handled as a contract by the compiler, it must be annotated with the
<code>#[starknet::contract]</code> attribute.</p>
<h2 id="anatomy-of-a-simple-contract"><a class="header" href="#anatomy-of-a-simple-contract">Anatomy of a Simple Contract</a></h2>
<p>This chapter will introduce you to the basics of Starknet contracts using a very
simple smart contract as example. You will learn how to write a contract that
allows anyone to store a single number on the Starknet blockchain.</p>
<p>Let's consider the following contract for the whole chapter. It might not be
easy to understand it all at once, but we will go through it step by step:</p>
<pre><code class="language-cairo noplayground">#[starknet::interface]
trait ISimpleStorage&lt;TContractState&gt; {
    fn set(ref self: TContractState, x: u128);
    fn get(self: @TContractState) -&gt; u128;
}

#[starknet::contract]
mod SimpleStorage {
    use starknet::storage::{StoragePointerReadAccess, StoragePointerWriteAccess};

    #[storage]
    struct Storage {
        stored_data: u128,
    }

    #[abi(embed_v0)]
    impl SimpleStorage of super::ISimpleStorage&lt;ContractState&gt; {
        fn set(ref self: ContractState, x: u128) {
            self.stored_data.write(x);
        }

        fn get(self: @ContractState) -&gt; u128 {
            self.stored_data.read()
        }
    }
}
</code></pre>
<p>14-1: A simple storage contract</span></p>
<h3 id="what-is-this-contract"><a class="header" href="#what-is-this-contract">What Is this Contract?</a></h3>
<p>Contracts are defined by encapsulating state and logic within a module annotated
with the <code>#[starknet::contract]</code> attribute.</p>
<p>The state is defined within the <code>Storage</code> struct, and is always initialized
empty. Here, our struct contains a single field called <code>stored_data</code> of type
<code>u128</code> (unsigned integer of 128 bits), indicating that our contract can store
any number between 0 and \( {2^{128}} - 1 \).</p>
<p>The logic is defined by functions that interact with the state. Here, our
contract defines and publicly exposes the functions <code>set</code> and <code>get</code> that can be
used to modify or retrieve the value of the stored variable. You can think of it
as a single slot in a database that you can query and modify by calling
functions of the code that manages the database.</p>
<h3 id="the-interface-the-contracts-blueprint"><a class="header" href="#the-interface-the-contracts-blueprint">The Interface: the Contract's Blueprint</a></h3>
<pre><code class="language-cairo noplayground">#[starknet::interface]
trait ISimpleStorage&lt;TContractState&gt; {
    fn set(ref self: TContractState, x: u128);
    fn get(self: @TContractState) -&gt; u128;
}
</code></pre>
<p>contract interface</span></p>
<p>Interfaces represent the blueprint of the contract. They define the functions
that the contract exposes to the outside world, without including the function
body. In Cairo, they're defined by annotating a trait with the
<code>#[starknet::interface]</code> attribute. All functions of the trait are considered
public functions of any contract that implements this trait, and are callable
from the outside world.</p>
<blockquote>
<p>The contract constructor is not part of the interface. Nor are internal
functions.</p>
</blockquote>
<p>All contract interfaces use a generic type for the <code>self</code> parameter,
representing the contract state. We chose to name this generic parameter
<code>TContractState</code> in our interface, but this is not enforced and any name can be
chosen.</p>
<p>In our interface, note the generic type <code>TContractState</code> of the <code>self</code> argument
which is passed by reference to the <code>set</code> function. Seeing the <code>self</code> argument
passed in a contract function tells us that this function can access the state
of the contract. The <code>ref</code> modifier implies that <code>self</code> may be modified, meaning
that the storage variables of the contract may be modified inside the <code>set</code>
function.</p>
<p>On the other hand, the <code>get</code> function takes a snapshot of <code>TContractState</code>,
which immediately tells us that it does not modify the state (and indeed, the
compiler will complain if we try to modify storage inside the <code>get</code> function).</p>
<p>By leveraging the <a href="./ch08-02-traits-in-cairo.html">traits &amp; impls</a> mechanism from
Cairo, we can make sure that the actual implementation of the contract matches
its interface. In fact, you will get a compilation error if your contract
doesn’t conform with the declared interface. For example, Listing
14-3 shows a wrong implementation of the <code>ISimpleStorage</code>
interface, containing a slightly different <code>set</code> function that doesn't have the
same signature.</p>
<pre><code class="language-cairo noplayground">    #[abi(embed_v0)]
    impl SimpleStorage of super::ISimpleStorage&lt;ContractState&gt; {
        fn set(ref self: ContractState) {}
        fn get(self: @ContractState) -&gt; u128 {
            self.stored_data.read()
        }
    }
</code></pre>
<p>implementation of the interface of the contract. This does not compile, as the
signature of <code>set</code> doesn't match the trait's.</span></p>
<p>Trying to compile a contract using this implementation will result in the
following error:</p>
<pre><code class="language-shell">$ scarb execute 
   Compiling listing_99_02 v0.1.0 (listings/ch100-introduction-to-smart-contracts/listing_02_wrong_impl/Scarb.toml)
error: The number of parameters in the impl function `SimpleStorage::set` is incompatible with `ISimpleStorage::set`. Expected: 2, actual: 1.
 --&gt; listings/ch100-introduction-to-smart-contracts/listing_02_wrong_impl/src/lib.cairo:23:16
        fn set(ref self: ContractState) {}
               ^^^^^^^^^^^^^^^^^^^^^^^

error: Wrong number of arguments. Expected 2, found: 1
 --&gt; listings/ch100-introduction-to-smart-contracts/listing_02_wrong_impl/src/lib.cairo:23:9
        fn set(ref self: ContractState) {}
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error: could not compile `listing_99_02` due to 2 previous errors
error: `scarb` command exited with error

</code></pre>
<h3 id="public-functions-defined-in-an-implementation-block"><a class="header" href="#public-functions-defined-in-an-implementation-block">Public Functions Defined in an Implementation Block</a></h3>
<p>Before we explore things further down, let's define some terminology.</p>
<ul>
<li>
<p>In the context of Starknet, a <em>public function</em> is a function that is exposed
to the outside world. A public function can be called by anyone, either from
outside the contract or from within the contract itself. In the example above,
<code>set</code> and <code>get</code> are public functions.</p>
</li>
<li>
<p>What we call an <em>external</em> function is a public function that can be directly
invoked through a Starknet transaction and that can mutate the state of the
contract. <code>set</code> is an external function.</p>
</li>
<li>
<p>A <em>view</em> function is a public function that is typically read-only and cannot
mutate the state of the contract. However, this limitation is only enforced by
the compiler, and not by Starknet itself. We will discuss the implications of
this in a later section. <code>get</code> is a view function.</p>
</li>
</ul>
<pre><code class="language-cairo noplayground">    #[abi(embed_v0)]
    impl SimpleStorage of super::ISimpleStorage&lt;ContractState&gt; {
        fn set(ref self: ContractState, x: u128) {
            self.stored_data.write(x);
        }

        fn get(self: @ContractState) -&gt; u128 {
            self.stored_data.read()
        }
    }
</code></pre>
<p><code>SimpleStorage</code> implementation</span></p>
<p>Since the contract interface is defined as the <code>ISimpleStorage</code> trait, in order
to match the interface, the public functions of the contract must be defined in
an implementation of this trait — which allows us to make sure that the
implementation of the contract matches its interface.</p>
<p>However, simply defining the functions in the implementation block is not
enough. The implementation block must be annotated with the <code>#[abi(embed_v0)]</code>
attribute. This attribute exposes the functions defined in this implementation
to the outside world — forget to add it and your functions will not be callable
from the outside. All functions defined in a block marked as <code>#[abi(embed_v0)]</code>
are consequently <em>public functions</em>.</p>
<p>Because the <code>SimpleStorage</code> contract is defined as a module, we need to access
the interface defined in the parent module. We can either bring it to the
current scope with the <code>use</code> keyword, or refer to it directly using <code>super</code>.</p>
<p>When writing the implementation of an interface, the <code>self</code> parameter in the
trait methods <strong>must</strong> be of type <code>ContractState</code>. The <code>ContractState</code> type is
generated by the compiler, and gives access to the storage variables defined in
the <code>Storage</code> struct. Additionally, <code>ContractState</code> gives us the ability to emit
events. The name <code>ContractState</code> is not surprising, as it’s a representation of
the contract’s state, which is what we think of <code>self</code> in the contract interface
trait. When <code>self</code> is a snapshot of <code>ContractState</code>, only read access is
allowed, and emitting events is not possible.</p>
<h3 id="accessing-and-modifying-the-contracts-state"><a class="header" href="#accessing-and-modifying-the-contracts-state">Accessing and Modifying the Contract's State</a></h3>
<p>Two methods are commonly used to access or modify the state of a contract:</p>
<ul>
<li><code>read</code>, which returns the value of a storage variable. This method is called
on the variable itself and does not take any argument.</li>
</ul>
<pre><code class="language-cairo noplayground">            self.stored_data.read()
</code></pre>
<ul>
<li><code>write</code>, which allows to write a new value in a storage slot. This method is
also called on the variable itself and takes one argument, which is the value
to be written. Note that <code>write</code> may take more than one argument, depending on
the type of the storage variable. For example, writing on a mapping requires 2
arguments: the key and the value to be written.</li>
</ul>
<pre><code class="language-cairo noplayground">            self.stored_data.write(x);
</code></pre>
<blockquote>
<p>Reminder: if the contract state is passed as a snapshot with <code>@</code> instead of
passed by reference with <code>ref</code>, attempting to modify the contract state will
result in a compilation error.</p>
</blockquote>
<p>This contract does not do much apart from allowing anyone to store a single
number that is accessible by anyone in the world. Anyone could call <code>set</code> again
with a different value and overwrite the current number. Nevertheless, each
value stored in the storage of the contract will still be stored in the history
of the blockchain. Later in this book, you will see how you can impose access
restrictions so that only you can alter the number.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <a rel="prev" href="appendix-06-useful-development-tools.html" class="mobile-nav-chapters previous"
                            title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                            <i class="fa fa-angle-left"></i>
                        </a>

                        <a rel="next" href="ch100-01-contracts-classes-and-instances.html" class="mobile-nav-chapters next"
                            title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                            <i class="fa fa-angle-right"></i>
                        </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                <a rel="prev" href="appendix-06-useful-development-tools.html" class="nav-chapters previous" title="Previous chapter"
                    aria-label="Previous chapter" aria-keyshortcuts="Left">
                    <i class="fa fa-angle-left"></i>
                </a>

                <a rel="next" href="ch100-01-contracts-classes-and-instances.html" class="nav-chapters next" title="Next chapter"
                    aria-label="Next chapter" aria-keyshortcuts="Right">
                    <i class="fa fa-angle-right"></i>
                </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>
        <script>
            window.rootPath = "";
        </script>

        <!-- Custom JS scripts -->
        <script src="theme/chat.js"></script>
        <script src="theme/js/version-switcher.js"></script>


    </div>
</body>

</html>
